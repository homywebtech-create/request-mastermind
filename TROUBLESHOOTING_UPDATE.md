# ุงุณุชูุดุงู ูุดุงูู ุงูุชุญุฏูุซุงุช - Update Troubleshooting

## ุงููุดููุฉ: ูุง ูุธูุฑ ุงูุชุญุฏูุซ ูู ุชุทุจูู ุงููุญุชุฑููู
### Problem: Update not showing in specialist app

## ุงูุฎุทูุงุช ููุชุญูู ูู ุงููุดููุฉ / Steps to Verify

### 1. ุงูุชุญูู ูู ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช / Check Notification Sending

ูู ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุชุญุฏูุซุงุช (`/admin/app-versions`):
- ุงุถุบุท ุนูู ุฒุฑ ุงูุฌุฑุณ (๐) ุจุฌุงูุจ ุงููุณุฎุฉ ูุฅุนุงุฏุฉ ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช
- ุชุฃูุฏ ูู ุธููุฑ ุฑุณุงูุฉ ุชุฃููุฏ ุจุนุฏุฏ ุงูุฅุดุนุงุฑุงุช ุงููุฑุณูุฉ

In App Version Management page (`/admin/app-versions`):
- Click the bell icon (๐) next to the version to resend notifications
- Confirm you see a success message with the count of sent notifications

### 2. ุงูุชุญูู ูู Device Tokens / Check Device Tokens

ุชุญูู ูู ุฃู ุงูุฃุฌูุฒุฉ ูุณุฌูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```sql
SELECT COUNT(*) FROM device_tokens WHERE platform = 'android';
```

### 3. ุงูุชุญูู ูู ุฑูู ุงูุฅุตุฏุงุฑ / Check Version Code

ุชุฃูุฏ ูู ุฃู ุฑูู ุฅุตุฏุงุฑ ุงูุชุญุฏูุซ ุฃุนูู ูู ุงูุฅุตุฏุงุฑ ุงููุซุจุช:
- ุงูุฅุตุฏุงุฑ ุงูุญุงูู ูู ุงูุชุทุจูู: ูุธูุฑ ูู `App.getInfo().build`
- ุงูุฅุตุฏุงุฑ ุงูุฌุฏูุฏ: ูุฌุจ ุฃู ูููู `version_code` ุฃูุจุฑ

Example:
- Current version code: 100102 (version 1.0.2)
- New version code: 100103 (version 1.0.3) โ
- New version code: 100101 (version 1.0.1) โ (ูู ูุธูุฑ ุงูุชุญุฏูุซ)

### 4. ูุญุต Edge Function Logs / Check Edge Function Logs

ูู Lovable Cloud โ Backend โ Edge Functions:
1. ุงูุชุญ `notify-app-update`
2. ุงุจุญุซ ุนู ุงูุณุฌูุงุช (logs) ุงูุฃุฎูุฑุฉ
3. ุชุญูู ูู:
   - โ ูุฌุญ ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช
   - ๐ฆ ุจูุงูุงุช ุงููุณุฎุฉ ุตุญูุญุฉ
   - ๐ ุนุฏุฏ ุงูุฃุฌูุฒุฉ ุงููุณุชููุฉ

### 5. ุงูุชุญูู ูู ุฅุนุฏุงุฏุงุช Firebase / Check Firebase Settings

ุชุฃูุฏ ูู:
- ุฅุนุฏุงุฏ FIREBASE_SERVICE_ACCOUNT ุจุดูู ุตุญูุญ ูู Secrets
- ุชูุนูู Firebase Cloud Messaging API
- ุชุณุฌูู ุงูุชุทุจูู ุจุดูู ุตุญูุญ ูู Firebase Console

### 6. ูุญุต ุงูุชุทุจูู ุนูู ุงูุฌูุงุฒ / Check App on Device

ูู ุชุทุจูู ุงููุญุชุฑู:
- ุชุฃูุฏ ูู ุชูุนูู ุงูุฅุดุนุงุฑุงุช
- ุชุฃูุฏ ูู ูุฌูุฏ ุงุชุตุงู ุจุงูุฅูุชุฑูุช
- ุงูุญุต console logs ูู React DevTools ุฅู ุฃููู

## ุงูุญููู ุงูุดุงุฆุนุฉ / Common Solutions

### ุงูุญู 1: ุฅุนุงุฏุฉ ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช
ุงุณุชุฎุฏู ุฒุฑ ุงูุฌุฑุณ (๐) ูู ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุชุญุฏูุซุงุช

### ุงูุญู 2: ุงูุชุญูู ูู ุฃุฑูุงู ุงูุฅุตุฏุงุฑุงุช
ุชุฃูุฏ ูู ุฃู `version_code` ููุชุญุฏูุซ ุงูุฌุฏูุฏ ุฃุนูู ูู ุงูุฅุตุฏุงุฑ ุงููุซุจุช

### ุงูุญู 3: ุฅุนุงุฏุฉ ุชุณุฌูู Device Token
ูู ุจุฅูุบุงุก ุชุณุฌูู ูุฅุนุงุฏุฉ ุชุณุฌูู ุงููุญุชุฑู ูู ุงูุชุทุจูู

### ุงูุญู 4: ูุญุต ุงูุฅุฐููุงุช
ุชุฃูุฏ ูู ููุญ ุงูุชุทุจูู ุฅุฐู ุงูุฅุดุนุงุฑุงุช ูุชุซุจูุช ุงูุชุทุจููุงุช

## ููุงุญุธุงุช ูููุฉ / Important Notes

1. **ุงูุชุญุฏูุซุงุช ุงูุชููุงุฆูุฉ**: ุงูุชุทุจูู ููุญุต ุงูุชุญุฏูุซุงุช ูู ุฏูููุฉ ุชููุงุฆูุงู
2. **ุงูุชุญุฏูุซุงุช ุงูุฅุฌุจุงุฑูุฉ**: ุฅุฐุง ูุงู ุงูุชุญุฏูุซ ุฅุฌุจุงุฑู (`is_mandatory = true`)ุ ูู ูุณุชุทูุน ุงููุณุชุฎุฏู ุชุฎุทูู
3. **ุงูุฅุดุนุงุฑุงุช ุงูููุฑูุฉ**: ุชูุฑุณู ุงูุฅุดุนุงุฑุงุช ููุฑุงู ุนูุฏ ุฅุถุงูุฉ ูุณุฎุฉ ุฌุฏูุฏุฉ ูุนูุฏ ุงูุถุบุท ุนูู ุฒุฑ ุฅุนุงุฏุฉ ุงูุฅุฑุณุงู

## ุงูุฏุนู ุงูููู / Technical Support

ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ ุจุนุฏ ุชุฌุฑุจุฉ ุงูุญููู ุฃุนูุงู:
1. ุงูุญุต Edge Function Logs ุจุงูุชูุตูู
2. ุชุญูู ูู Firebase Console โ Cloud Messaging
3. ุชุฃูุฏ ูู ุชุญุฏูุซ ุงูุชุทุจูู ูุฏููุงู ูุฑุฉ ูุงุญุฏุฉ ููุชุฃูุฏ ูู ุนูู ุงููุธุงู
